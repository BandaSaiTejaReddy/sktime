# adapted from:
# - https://github.com/scikit-hep/azure-wheel-helpers/blob/master/azure-publish-dist.yml

steps:
    - script: |
        ls -lh dist/
      displayName: 'List wheels'

    # publish wheels on azure: https://dev.azure.com/mloning/sktime/_build
    - task: PublishPipelineArtifact@0
      condition: succeeded()
      displayName: 'Publish wheels'
      inputs:
        artifactName: 'wheels_$(Agent.OS)_$(Agent.JobName)_$(PYTHON_ARCHITECTURE)'
        targetPath: 'dist'

    - task: PublishTestResults@2
      displayName: 'Publish test results'
      condition: succeededOrFailed()
      inputs:
        testResultsFiles: '$(TEST_DIR)/$(PYTEST_RESULTS)'
        testRunTitle: 'pytest_$(Agent.OS)_$(Agent.JobName)_$(PYTHON_ARCHITECTURE)'
